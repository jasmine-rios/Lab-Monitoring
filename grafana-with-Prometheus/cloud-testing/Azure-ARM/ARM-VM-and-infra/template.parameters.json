{
	"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"location": {
			"value":"eastus"
		},
		"networkInterfaceNameBastion": {
			"value": "grafana-Bastion-NI"
		},
		"networkInterfaceName": {
			"value": "grafana-NI"
		},
		"networkInterfaceNameHost1": {
            "value": "grafana-host1-NI"
        },
        "networkInterfaceNameHost2": {
            "value": "grafana-host2-NI"
        },
		"networkSecurityGroupName": {
			"value": "grafana-NSG"
		},
		"networkSecurityGroupNameHost1": {
            "value": "grafana-host1-NSG"
        },
		"networkSecurityGroupNameHost2": {
            "value": "grafana-host2-NSG"
        },
		"networkSecurityGroupRulesBastion": {
			"value": [
				{
					"name": "Bastion",
					"properties": {
						"priority": 300,
						"protocol": "TCP",
						"access": "Allow",
						"direction": "Inbound",
						"sourceAddressPrefix": "*",
						"sourcePortRange": "*",
						"destinationAddressPrefix": "*",
						"destinationPortRange": "22",
						"description": "Allow inbound traffic from VMs to Bastion."
					}
				}
			]
		},
		"networkSecurityGroupRules": {
			"value": [
				{
					"name": "SSH",
					"properties": {
						"priority": 300,
						"protocol": "TCP",
						"access": "Allow",
						"direction": "Inbound",
						"sourceAddressPrefix": "*",
						"sourcePortRange": "*",
						"destinationAddressPrefix": "*",
						"destinationPortRange": "22",
						"description": "Allow inbound SSH traffic from Bastion."
					}
				},
				{
					"name": "grafana",
					"properties": {
						"priority": 310,
						"protocol": "TCP",
						"access": "Allow",
						"direction": "Inbound",
						"sourceAddressPrefix": "*",
						"sourcePortRange": "*",
						"destinationAddressPrefix": "*",
						"destinationPortRange": "3000",
						"description": "Allow inbound default Grafana port"
					}
				},
				{
					"name": "HTTP",
					"properties": {
						"priority": 320,
						"protocol": "TCP",
						"access": "Allow",
						"direction": "Inbound",
						"sourceAddressPrefix": "*",
						"sourcePortRange": "*",
						"destinationAddressPrefix": "*",
						"destinationPortRange": "80",
						"description": "Allow Any HTTP Inbound to serve webpages for Grafana and Prometheus"
					}
				},
				{
					"name": "Prometheus",
					"properties": {
						"priority": 330,
						"protocol": "TCP",
						"access": "Allow",
						"direction": "Inbound",
						"sourceAddressPrefix": "*",
						"sourcePortRange": "*",
						"destinationAddressPrefix": "*",
						"destinationPortRange": "9090",
						"description": "Allow inbound default Prometheus port"
					}
				},
				{
					"name": "Prometheus-gateway",
					"properties": {
						"priority": 340,
						"protocol": "TCP",
						"access": "Allow",
						"direction": "Inbound",
						"sourceAddressPrefix": "*",
						"sourcePortRange": "*",
						"destinationAddressPrefix": "*",
						"destinationPortRange": "9091",
						"description": "Allow inbound default Prometheus gateway port"
					}
				}
			]
		},
		"networkSecurityGroupRulesHost1": {
			"value": [
				{
					"name": "SSH",
					"properties": {
						"priority": 300,
						"protocol": "TCP",
						"access": "Allow",
						"direction": "Inbound",
						"sourceAddressPrefix": "*",
						"sourcePortRange": "*",
						"destinationAddressPrefix": "*",
						"destinationPortRange": "22",
						"description": "Allow inbound SSH traffic from anywhere."
					}
				},
				{
				"name": "Prometheus",
				"properties": {
					"priority": 310,
					"protocol": "TCP",
					"access": "Allow",
					"direction": "Inbound",
					"sourceAddressPrefix": "*",
					"sourcePortRange": "*",
					"destinationAddressPrefix": "*",
					"destinationPortRange": "9090",
					"description": "Allow inbound default Prometheus port"
				}
			}
		]
		},
		"networkSecurityGroupRulesHost2": {
			"value": [
				{
					"name": "RDP",
					"properties": {
						"priority": 300,
						"protocol": "TCP",
						"access": "Allow",
						"direction": "Inbound",
						"sourceAddressPrefix": "*",
						"sourcePortRange": "*",
						"destinationAddressPrefix": "*",
						"destinationPortRange": "3389",
						"description": "Allow inbound RDP traffic from anywhere."
					}
				},
				{
				"name": "Prometheus-gateway",
				"properties": {
					"priority": 310,
					"protocol": "TCP",
					"access": "Allow",
					"direction": "Inbound",
					"sourceAddressPrefix": "*",
					"sourcePortRange": "*",
					"destinationAddressPrefix": "*",
					"destinationPortRange": "9091",
					"description": "Allow inbound default Prometheus gateway port"
				}
			}
		]
		},
		"publicIpAddressNameBastion": {
			"value": "grafana-publicIP-bastion"
		},
		"publicIpAddressSku": {
			"value": "Standard"
		},
		"virtualMachineName": {
			"value": "grafana-RHEL"
		},
		"virtualMachineHost1Name": {
            "value": "grafana-host1-ubuntu"
        },
        "virtualMachineHost2Name": {
            "value": "grafana-host2-win"
        },
		"osDiskType": {
			"value": "Premium_LRS"
		},
		"bastionName": {
			"value": "Grafana-bastion"
		},
		"virtualMachineSize": {
			"value": "Standard_B2s"
		},
		"virtualMachineSizeHosts": {
            "value": "Standard_DS1_v2"
        },
		"adminUsername": {
			"value": "azureuser"
		},
		"adminPassword": {
			"value": ""
		},
		"securityType": {
			"value": "TrustedLaunch"
		},
		"secureBoot": {
			"value": true
		},
		"vTPM": {
			"value": true
		},
		"virtualNetworkName": {
			"value": "grafana-VNet"
		},
		"Subnet1": {
            "value": "grafana-subnet1"
        },
        "Subnet2": {
            "value": "grafana-subnet2"
        }
	}
}
